server.port=8888
#debug=true
spring.security.user.name=user
spring.security.user.password=voicebox1@
spring.output.ansi.enabled=always
spring.profiles.active=production

# Logging configuration for API endpoints
logging.level.web=INFO
logging.level.org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping=TRACE

# OpenAPI Configuration
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/v3/api-docs
springdoc.show-actuator=true
springdoc.swagger-ui.operationsSorter=method

# Spring Batch Job Configuration
# Disable auto-run of jobs on startup (jobs are scheduled via @Scheduled annotations)
spring.batch.job.enabled=false

# All jobs run in America/Toronto timezone
batch.timezone=America/Toronto

# Comic Download Job - Downloads all comics daily
batch.comic-download.enabled=true
batch.comic-download.cron=0 0 6 * * ?

# Comic Reconciliation Job - Reconciles comic configuration with bootstrap
batch.reconciliation.enabled=true
batch.reconciliation.cron=0 15 6 * * ?

# Metrics Archive Job - Archives yesterday's metrics to JSON
batch.metrics-archive.enabled=true
batch.metrics-archive.cron=0 30 6 * * ?

# Image Metadata Backfill Job - Backfills missing image metadata
batch.image-backfill.enabled=true
batch.image-backfill.cron=0 30 6 * * ?
batch.image-backfill.batch-size=100

# Metrics Update Job - Updates metrics every 5 minutes
batch.metrics-update.enabled=true
batch.metrics-update.fixed-delay=300000

# Retrieval Record Purge Job - Purges old retrieval records
batch.record-purge.enabled=true
batch.record-purge.cron=0 45 6 * * ?

# Batch execution tracking - JSON file location
batch.tracking.json-file=${comics.cache.location}/batch-executions.json

# Default cache location - will be normalized to appropriate OS path
# Windows: Uses C:/comics if drive exists, otherwise ~/comics
# Linux/macOS: Uses ~/comics if path starts with a drive letter, otherwise uses as-is
comics.cache.location=${COMICS_CACHE_LOCATION:C:/comics}
comics.cache.config=./comics.json
comics.cache.usersConfig=./users.json
comics.cache.preferencesConfig=./preferences.json
comics.cache.chromeHeadless=true
# Task execution tracker will store execution data in task-executions.json in the cache location

# JWT Configuration
jwt.secret=your-secret-key-should-be-very-long-and-secure-in-production-environment
jwt.expiration=900000
jwt.refresh-expiration=86400000

# Metrics Configuration
# Color detection: Percentage of pixels to sample for determining if image is B&W or color (0.0-100.0)
comics.metrics.color-detection.sample-percentage=5.0
# Error tracking: Maximum number of errors to keep per comic in last_errors.json
comics.metrics.error-tracking.max-errors-per-comic=5
